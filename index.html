<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/index.css">
	<link rel="manifest" href="manifest.json">
	<meta name="theme-color" content="#0066cc">

	<title>Home</title>

  <link rel="icon" type="image/png" href="res/logo/sicap-logo.png"/>
</head>
<body>
	<a href="./html/forms.html" target="_blank">
		<video autoplay muted loop id="landing-bg">
		  	<source src="res/videos/landing-bg.mp4" alt="landing page video" type="video/mp4">
		</video>
	</a>

  <script>
        if ("serviceWorker" in navigator) {
          window.addEventListener("load", () => {
            navigator.serviceWorker
              .register("serviceworker.js") // Correct filename without hyphen
              .then((reg) => {
                console.log("Service Worker registered:", reg.scope);
                // Force update if there's a new service worker
                if (reg.waiting) {
                  reg.waiting.postMessage({type: 'SKIP_WAITING'});
                }
              })
              .catch((err) => console.error("Service Worker registration failed:", err));
          });
          
          // Listen for service worker updates
          navigator.serviceWorker.addEventListener('controllerchange', () => {
            console.log('Service Worker updated, reloading...');
            window.location.reload();
          });
        }
     </script>
</body>
</html>